(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{5269:function(e,r,t){Promise.resolve().then(t.t.bind(t,41,23)),Promise.resolve().then(t.t.bind(t,7580,23)),Promise.resolve().then(t.bind(t,1489))},1489:function(e,r,t){"use strict";t.r(r),t.d(r,{ResetPasswordForm:function(){return _}});var s=t(7437),o=t(2265),a=t(1865),n=t(4033),i=t(4780),l=t(6399),c=t(1752),u=t(7992),d=t(9889),p=t.n(d);let _=()=>{let[e,r]=(0,o.useState)(""),{login:t}=(0,u.a)(),d=(0,n.useRouter)(),_=(0,n.useSearchParams)(),f=_.get("token"),{register:h,handleSubmit:m,formState:{errors:w},reset:g}=(0,a.cI)(),v=(0,o.useCallback)(async e=>{let s=await fetch("".concat("http://localhost:3000","/api/users/reset-password"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(s.ok){let r=await s.json();await t({email:r.user.email,password:e.password}),d.push("/account?success=Password reset successfully.")}else r("There was a problem while resetting your password. Please try again later.")},[d,t]);return(0,o.useEffect)(()=>{g({token:f||void 0})},[g,f]),(0,s.jsxs)("form",{onSubmit:m(v),className:p().form,children:[(0,s.jsx)(c.v,{error:e,className:p().message}),(0,s.jsx)(l.I,{name:"password",type:"password",label:"New Password",required:!0,register:h,error:w.password}),(0,s.jsx)("input",{type:"hidden",...h("token")}),(0,s.jsx)(i.Button,{type:"submit",appearance:"primary",label:"Reset Password",className:p().submit})]})}},4780:function(e,r,t){"use strict";t.r(r),t.d(r,{Button:function(){return l}});var s=t(7437);t(2265);var o=t(1396),a=t.n(o),n=t(7636),i=t.n(n);let l=e=>{let{el:r="link",label:t,newTab:o,href:n,appearance:l,className:c,onClick:u,type:d="button",disabled:p,invert:_,children:f}=e,h=r,m=o?{target:"_blank",rel:"noopener noreferrer"}:{},w=[i().button,c,i()["appearance--".concat(l)],_&&i()["".concat(l,"--invert")]].filter(Boolean).join(" "),g=(0,s.jsxs)("div",{className:i().content,children:[(0,s.jsx)("span",{className:i().label,children:t}),f]});if((u||"submit"===d)&&(h="button"),"link"===h)return(0,s.jsx)(a(),{href:n||"",className:w,...m,onClick:u,children:g});let v=h;return(0,s.jsx)(v,{href:n,className:w,type:d,...m,onClick:u,disabled:p,children:g})}},6399:function(e,r,t){"use strict";t.d(r,{I:function(){return n}});var s=t(7437);t(2265);var o=t(1577),a=t.n(o);let n=e=>{let{name:r,label:t,required:o,register:n,error:i,type:l="text",validate:c,disabled:u}=e;return(0,s.jsxs)("div",{className:a().inputWrap,children:[(0,s.jsxs)("label",{htmlFor:"name",className:a().label,children:[t,o?(0,s.jsx)("span",{className:a().asterisk,children:"\xa0*"}):""]}),(0,s.jsx)("input",{className:[a().input,i&&a().error].filter(Boolean).join(" "),type:l,...n(r,{required:o,validate:c,..."email"===l?{pattern:{value:/\S+@\S+\.\S+/,message:"Please enter a valid email"}}:{}}),disabled:u}),i&&(0,s.jsx)("div",{className:a().errorMessage,children:(null==i?void 0:i.message)||(null==i?void 0:i.type)!=="required"?null==i?void 0:i.message:"This field is required"})]})}},1752:function(e,r,t){"use strict";t.d(r,{v:function(){return n}});var s=t(7437);t(2265);var o=t(4690),a=t.n(o);let n=e=>{let{message:r,error:t,success:o,warning:n,className:i}=e,l=r||t||o||n;return l?(0,s.jsx)("div",{className:[a().message,i,t&&a().error,o&&a().success,n&&a().warning,!t&&!o&&!n&&a().default].filter(Boolean).join(" "),children:l}):null}},7992:function(e,r,t){"use strict";t.d(r,{H:function(){return n},a:function(){return i}});var s=t(7437),o=t(2265);let a=(0,o.createContext)({}),n=e=>{let{children:r}=e,[t,n]=(0,o.useState)(),[i,l]=(0,o.useState)(),c=(0,o.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,passwordConfirm:e.passwordConfirm})});if(t.ok){var r;let{data:e,errors:s}=await t.json();if(s)throw Error(s[0].message);n(null==e?void 0:null===(r=e.loginUser)||void 0===r?void 0:r.user),l("loggedIn")}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),u=(0,o.useCallback)(async e=>{try{let r=await fetch("".concat("http://localhost:3000","/api/users/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})});if(r.ok){let{user:e,errors:t}=await r.json();if(t)throw Error(t[0].message);return n(e),l("loggedIn"),e}throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),d=(0,o.useCallback)(async()=>{try{let e=await fetch("".concat("http://localhost:3000","/api/users/logout"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok)n(null),l("loggedOut");else throw Error("An error occurred while attempting to logout.")}catch(e){throw Error("An error occurred while attempting to logout.")}},[]);(0,o.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat("http://localhost:3000","/api/users/me"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){let{user:r}=await e.json();n(r||null),l(r?"loggedIn":void 0)}else throw Error("An error occurred while fetching your account.")}catch(e){throw n(null),Error("An error occurred while fetching your account.")}};e()},[]);let p=(0,o.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/forgot-password"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})});if(t.ok){var r;let{data:e,errors:s}=await t.json();if(s)throw Error(s[0].message);n(null==e?void 0:null===(r=e.loginUser)||void 0===r?void 0:r.user)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),_=(0,o.useCallback)(async e=>{try{let s=await fetch("".concat("http://localhost:3000","/api/users/reset-password"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.password,passwordConfirm:e.passwordConfirm,token:e.token})});if(s.ok){var r,t;let{data:e,errors:o}=await s.json();if(o)throw Error(o[0].message);n(null==e?void 0:null===(r=e.loginUser)||void 0===r?void 0:r.user),l((null==e?void 0:null===(t=e.loginUser)||void 0===t?void 0:t.user)?"loggedIn":void 0)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]);return(0,s.jsx)(a.Provider,{value:{user:t,setUser:n,login:u,logout:d,create:c,resetPassword:_,forgotPassword:p,status:i},children:r})},i=()=>(0,o.useContext)(a)},9889:function(e){e.exports={form:"ResetPasswordForm_form__ZHMfG",submit:"ResetPasswordForm_submit__0pJuk"},e.exports.__checksum="30431f94fba6"},41:function(e){e.exports={resetPassword:"reset-password_resetPassword__vCsIM"},e.exports.__checksum="98658b573778"},7636:function(e){e.exports={label:"Button_label__pYjjJ",button:"Button_button__QvmpL",content:"Button_content__rz2Uk","appearance--primary":"Button_appearance--primary__aXtFJ","appearance--secondary":"Button_appearance--secondary__67RnZ","primary--invert":"Button_primary--invert__abvn4","secondary--invert":"Button_secondary--invert__OpT85","appearance--default":"Button_appearance--default__Hxo2A","appearance--none":"Button_appearance--none__nd_sY"},e.exports.__checksum="feca588f12e7"},7580:function(e){e.exports={gutter:"Gutter_gutter__QB0_n",gutterLeft:"Gutter_gutterLeft__9iSai",gutterRight:"Gutter_gutterRight__4jfEx"},e.exports.__checksum="8b7edfbc03b1"},1577:function(e){e.exports={inputWrap:"Input_inputWrap__8dIRM",input:"Input_input__KwwA8",asterisk:"Input_asterisk__YQ6ea",error:"Input_error__qB_Bs",label:"Input_label__4aiDX",errorMessage:"Input_errorMessage__9tcd0"},e.exports.__checksum="3fb30c4ade3e"},4690:function(e){e.exports={message:"Message_message__z1tdG",default:"Message_default__RDDb4",warning:"Message_warning__FT9n8",error:"Message_error__WX2fA",success:"Message_success__Cnnxv"},e.exports.__checksum="e7c05ffe3613"},622:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=t(2265),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,t){var s,a={},c=null,u=null;for(s in void 0!==t&&(c=""+t),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(u=r.ref),r)n.call(r,s)&&!l.hasOwnProperty(s)&&(a[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===a[s]&&(a[s]=r[s]);return{$$typeof:o,type:e,key:c,ref:u,props:a,_owner:i.current}}r.Fragment=a,r.jsx=c,r.jsxs=c},7437:function(e,r,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[724,644,971,864,744],function(){return e(e.s=5269)}),_N_E=e.O()}]);